# Optimal Allocations

## Introduction

Founder Frank is raising his first round. He has total allocation $A$ that he wants to distribute among candidate investors, $v_i$  for $i\in \{1,...,n\}$, who are interested in participating$^1$. Each investor asks “how can I be helpful” and outlines their helpfulness across standard categories $c_k$ for $k\in \{1,...,m\}$ (e.g. talent network, follow-on capacity, domain expertise, customer sourcing, whitepaper writing). Frank has internally estimated a utility $U(c_k)$ for each of these categories given the needs of the business and the unique abilities of his team.

It’s Frank’s responsibility to maximize $f(\vec{a})=\sum\limits_{k=1}\limits^{m}{U(\sum\limits_{i=1}\limits^{n}{h(v_i, c_k, a_i)})}$ through control vector $\vec{a}$ constrained by $g(\vec{a})=A-\sum\limits_{i=1}\limits^{n}{a_i}=0$. More colloquially, Frank wants to maximize the summed utility over all of the relevant categories, which are themselves the sum over each investor’s helpfulness in this category passed through Frank’s category specific utility function with the constraint that the sum of investor allocations should not exceed Franks cap of $A$. 

It’s well-understood that investors’ helpfulness increases monotonically with the size of their allocation, though the exact function is not known. We will examine different helpfulness functions $h(v_i, c_k, a_i)$––in particular, when $h$ is constant, linear, sublinear, and superlinear. 

1. The **constant hypothesis** corresponds to the case where an investor will help you the same amount no matter what as long as their on the cap table.$^2$ 
2. The **linear hypothesis** corresponds to the case where every dollar invested corresponds to an additional helpfulness unit. In this case, there help is allocated to their portco’s directly in proportion to their size in the portfolio. 
3. The **sublinear hypothesis** corresponds to the case where each unit increase in allocation size increases help logarithmically––e.g. the increase in help from $500k to $1m is the same as the increase between $1m and $2m. 
4. The **superlinear hypothesis** corresponds to the situation where the investor only cares if the allocation is large enough and then gets very helpful for their largest allocations. 

Before help units get scaled by investors’ *willingness* to help, we have to model the investors *skill* in each category. Their skill at, say, closing deals with large Napa Valley vineyards for Frank’s wine ERP business, is what we attempt to model here. This category-specific skill is then translated to help bestowed upon Frank by one of the functions of allocation size described above. For modeling initial investor skills, we consider three standard distributions: exponential, uniform, and gaussian. 

1. Suppose investors always provide positive help and we compute an average investor helpfulness $\mu$. If we consider the domain $[0,\infty)$, the function which maximizes the differential entropy$^3$ subject to the single constraint that $E[X]=\mu$ is the **exponential distribution**,  $p(x)=\frac{1}{\mu}e^{-\frac{x}{\mu}}$. 
2. If we suppose investors aren’t theoretically infinitely helpful and instead obey some known bounds $[a,b]$, we can generate an optimal prior in the same way which yields the **uniform distribution**, $p(x)=\frac{1}{b-a}$, as you’d expect. 
3. If we suppose that investors have the capacity for negative helpfulness, we can consider the bounds $(-\infty, \infty)$. If we use and average helpfulness $E[X]=\mu$, we need one more constraint to define this distribution. Expected absolute deviation $E[|X-\mu|]=b$ yields the Laplace distribution $p(x)=\frac{1}{2b}e^{-\frac{|x-\mu|}{b}}$ while expected squared deviation $E[(X-\mu)^2]=\sigma$ yields the Gaussian distribution $p(x)=\frac{1}{\sqrt{2\pi\sigma}}e^{-\frac{(x-\mu)^2}{2\sigma}}$. In this category, we will be considering the implications of initial investor skill generated by a **Gaussian distribution**.$^{4,5}$

To summarize diagrammatically, Frank selects allocations $a_i$ for each of $n$ investors who then have skills $s_{i,k}$ for each category which based on allocation size are translated into help $h(v_i, c_k, a_i)$. Frank then sums up all the help he receives in a given category and passes it through his utility function. Finally, Frank sums up the total utility of the help he has received across all relevant categories. This is the metric he intends to maximize. 

![IMG_0037.jpg](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/608b6f7e-7424-431d-b8ff-66c742d8e91b/IMG_0037.jpg)

With these foundations laid, we can now begin to analyze the implications of different models. 

## Solution

### Linear Helpfulness and Linear Utility

In the last section we defined $f(\vec{a})=\sum\limits_{k=1}\limits^{m}{U(\sum\limits_{i=1}\limits^{n}{h(v_i, c_k, a_i)})}$ subject to $g(\vec{a})=A-\sum\limits_{i=1}\limits^{n}{a_i}=0$. If we assume linear helpfulness for investors and linear utility for Frank, we can specify that$f(\vec{a})=\sum\limits_{k=1}\limits^{m}{u_k(\sum\limits_{i=1}\limits^{n}{a_{i}h(v_i, c_k)})}$.

Formulating our problem in this linear way provides a helpful first interpretation. These linear constraints create a convex polytope in $\mathbb{R}^n$ where our feasible region is the intersection of known linear half-spaces. Our objective function is a real-valued affine function defined on the polyhedron, so we can solve the problem with a simple linear program. 

Find vector $\vec{a}$

that maximizes $f(\vec{a})=\sum\limits_{k=1}\limits^{m}{u_k(\sum\limits_{i=1}\limits^{n}{a_{i}h(I=i, C=k)})}$

subject to $A-\sum\limits_{i=n}\limits^{n}{a_i}=0$

and $\vec{a}\geq \bf{0}$.

We could (perhaps more satisfyingly) solve the problem analytically the following way. First, to compute optimal allocation $\vec{a}$ we construct our Lagrangian $\mathcal{L}(\vec{a}, \lambda)$. 

![IMG_0038.jpg](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1d772e92-f631-4701-92da-bf1710984de4/IMG_0038.jpg)

Now we compute the gradient $\nabla_{a,\lambda}$ and let it equal zero. 

![IMG_0039.jpg](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ef69f3d4-0e6a-4dc4-a3cc-324a1c47d655/IMG_0039.jpg)

This yields $n+1$ equations and $n+1$ unknowns, one for each investor and one for $\lambda$. The first $n$ equations can be interpreted the following way. As investor $i$’s allocation is adjusted slightly, Frank’s total utility changes by the sum over all relevant business categories of that category’s utility times the unit helpfulness of investor $i$ in that category. Our last equation is simply that the sum of all allocations must be Frank’s total reserved allocation. 

### Uniform Ability, Log Helpfulness, and Log Utility

## Implementation

See notebooks folder.

## Notes

1. Where $A$ can be denominated equivalently in shares, percentage ownership, or dollars invested in the case where the round is completed at a single price. 
2. We make no assumptions whether this is the investor consistently providing max helpfulness or consistently writing checks and never responding again.
3. This is done by maximizing the functional $H(X) = - \int\limits^{\infty}_{-\infty} p\ln(p) \, dx$ under our constraints. See chapter 11 of E. T. Jaynes’s *Probability Theory: The Logic of Science* an explanation of why this technique works. 
4. This is mainly for convention’s sake. Taleb discusses the particular benefits of the Laplacian and mean absolute deviation in *Statistical Consequences of Fat Tails*. 
5. In reality there would be notable covariance between investor skill. Goodness tends to be correlated. An investor who has previously built a successful business in your vertical may have skill in many relevant categories for you. This would be a nice place to extend our work.